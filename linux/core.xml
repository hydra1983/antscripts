<project name="core-linux">
	<import>
		<url url="${SCRIPTS_BASE}/core.xml" />
		<url url="${SCRIPTS_BASE}/ant-contrib.xml" />
	</import>

	<macrodef name="run">
		<attribute name="exec" />
		<attribute name="dir" default="${basedir}" />
		<attribute name="debug" default="false" />
		<attribute name="output" default="" />
		<attribute name="error" default="" />
		<attribute name="result" default="" />
		<attribute name="failonerror" default="true" />
		<sequential>
			<if>
				<istrue value="@{debug}"/>
				<then>
					<echo message="[run] /bin/bash -c @{exec}"/>
				</then>
			</if>
			<exec executable="/bin/bash" failonerror="@{failonerror}" dir="@{dir}" outputproperty="@{output}" errorproperty="@{error}" resultproperty="@{result}">
				<arg value="-c" />
				<arg value="@{exec}" />
			</exec>
		</sequential>
	</macrodef>

	<macrodef name="sudo">
		<attribute name="exec" />
		<attribute name="dir" default="${basedir}" />
		<attribute name="debug" default="false" />
		<attribute name="output" default="" />
		<attribute name="error" default="" />
		<attribute name="result" default="" />
		<attribute name="failonerror" default="true" />
		<sequential>
			<exec executable="sudo" failonerror="@{failonerror}" dir="@{dir}" outputproperty="@{output}" errorproperty="@{error}" resultproperty="@{result}">
				<arg value="/bin/bash" />
				<arg value="-c" />
				<arg value="@{exec}" />
			</exec>
		</sequential>
	</macrodef>
</project>
