<project name="logo">
	<import>
		<url url="${SCRIPTS_BASE}/core.xml" />
	</import>

	<scriptdef language="javascript" name="logo">
		<attribute name="message" />
		<![CDATA[	
			importClass(java.lang.System);
			
			function mkchrseq(c,n){
				var s = "";
				for(var i = 0;i < n;i++){
					s += c;
				}
				return s;
			};

			function center(s,w,c){
				var str = s;
				var wid = str.length();
				
				if(wid > w){
					str = str.substring(0,w);
				} else {
					var w1, w2;
					w1 = (w - wid)/2;
					w2 = w - w1 - wid;					
					s = mkchrseq(c, w1) + s + mkchrseq(c, w2);
				}
				
				return s;
			};

			function logo(msg,w){
				var s = "";
				var h;
				if(w == null || w == undefined){
					w = 40;
				}
				h = ((msg == null) ? "Hello world!" : msg);
				s += mkchrseq(":", w);
				s += '\n';
				s += "::";
				s += center(h, w - 4, " ");
				s += "::";
				s += '\n';
				s += mkchrseq(":", w);
				s += '\n'; 
				return s;
			};
			
			var the_string = attributes.get( "message" );
			var s = "";
			s += logo(the_string,80," ");
			System.out.print(s);
		]]>
	</scriptdef>
</project>